<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html b:css='false' b:defaultwidgetversion='2' b:layoutsVersion='3' b:responsive='true' b:templateUrl='indie.xml' b:templateVersion='1.3.0' expr:dir='data:blog.languageDirection' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr' xmlns:schema='http://schema.org/'>
<head>
    <meta content='width=device-width, initial-scale=1' name='viewport'/>
    <!--
        Theme Name: GridSense
        Author: AliasNull
        Version: 1.2.0
        Description: A modern, responsive, dark-mode enabled Blogger theme with advanced ad management and grid layout.
        License: Creative Commons Attribution 4.0 International
    -->
    <b:include data='blog' name='all-head-content'/>
    <title><data:blog.pageTitle/></title>
    <b:template-skin>
    <![CDATA[
    /* Layout Editor Styles - STRICT RESET */
    body#layout {
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        background: #f4f4f4;
        font-family: sans-serif;
    }

    /* Force Block Layout on All Wrappers to Prevent Flex/Grid Inheritance */
    /* REMOVED generic 'div' selector to avoid breaking internal widget layouts */
    body#layout header,
    body#layout footer,
    body#layout main,
    body#layout aside,
    body#layout .site-wrapper,
    body#layout #header-wrapper,
    body#layout .header-container,
    body#layout .content-wrapper,
    body#layout #footer-wrapper {
        display: block !important;
        width: 100% !important;
        float: none !important;
        clear: both !important;
    }

    /* Re-enable Floats ONLY for Main/Sidebar Columns */
    body#layout .content-wrapper {
        overflow: hidden !important; /* Clearfix */
    }

    /* Main Content Column */
    body#layout #main-wrapper {
        width: 65% !important;
        float: left !important;
        clear: none !important; /* Allow sitting next to sidebar */
        margin-right: 2% !important;
    }

    /* Sidebar Column */
    body#layout #sidebar-wrapper {
        width: 33% !important;
        float: right !important;
        clear: none !important; /* Allow sitting next to main */
    }

    /* Layout Sections (Draggable Areas) */
    body#layout .section {
        border: 2px dashed #ccc;
        background: #fff;
        padding: 15px;
        margin-bottom: 20px;
        position: relative;
        display: block !important;
        width: 100% !important;
    }
    body#layout .section:hover {
        border-color: #aaa;
    }

    /* Hide UI Elements Not Editable in Layout */
    body#layout .nav-tools,
    body#layout .search-overlay,
    body#layout .theme-toggle,
    body#layout .search-trigger,
    body#layout .mobile-menu-btn {
        display: none !important;
    }

    /* Secondary Menu in Layout Editor */
    body#layout .secondary-nav-wrapper {
        display: block !important;
        border-bottom: 3px dashed #3498db;
        padding: 10px;
        margin-bottom: 20px;
        background: #eaf6fd;
    }
    body#layout .secondary-nav-wrapper:before {
        content: "Secondary Menu (Topics)";
        display: block;
        font-weight: bold;
        color: #2980b9;
        margin-bottom: 5px;
        font-size: 0.9em;
        text-transform: uppercase;
    }

    /* Make widget titles stand out */
    body#layout h2 {
        margin: 0 0 10px;
        font-size: 16px;
        color: #555;
        border-bottom: 1px solid #eee;
        padding-bottom: 5px;
    }

    /* Post Ads Manager Section (Visible in Layout Editor) */
    body#layout #post-ads-manager {
        display: block !important;
        border: 3px dashed #e67e22;
        background: #fff8f0;
        margin: 30px 0;
        padding: 20px;
    }
    body#layout #post-ads-manager:before {
        content: "POST ADS MANAGER (These widgets will be injected into posts)";
        display: block;
        font-weight: bold;
        color: #d35400;
        margin-bottom: 15px;
        font-size: 1.2em;
        text-align: center;
        text-transform: uppercase;
    }
    ]]>
    </b:template-skin>
    <b:skin><![CDATA[
    /* Variable definitions
    <Variable name="keycolor" description="Main Color" type="color" default="#007BFF" value="#007BFF"/>
    <Variable name="body.font" description="Font" type="font" default="normal normal 16px 'Roboto', sans-serif" value="normal normal 16px 'Roboto', sans-serif"/>
    */

    :root {
        --primary-color: $(keycolor);
        --bg-color: #f4f6f8;
        --surface-color: #ffffff;
        --text-color: #333333;
        --text-secondary: #666666;
        --border-color: #e0e0e0;
        --header-height: 70px;
        --shadow: 0 4px 6px rgba(0,0,0,0.05);
        --ad-bg: #eee;
    }

    [data-theme="dark"] {
        --bg-color: #121212;
        --surface-color: #1e1e1e;
        --text-color: #e0e0e0;
        --text-secondary: #aaaaaa;
        --border-color: #333333;
        --shadow: 0 4px 6px rgba(0,0,0,0.3);
        --ad-bg: #333;
    }

    /* Reset & Basics */
    * { box-sizing: border-box; }
    body {
        margin: 0;
        font: $(body.font);
        background-color: var(--bg-color);
        color: var(--text-color);
        transition: background-color 0.3s, color 0.3s;
        line-height: 1.6;
    }
    a { color: var(--primary-color); text-decoration: none; transition: 0.2s; }
    a:hover { opacity: 0.8; }

    /* Stronger Image Reset & Blogger Fixes */
    img, iframe, video, object, embed { max-width: 100%; }

    /* Target all possible image containers in Blogger - AGGRESSIVE RESET */
    .post-body img,
    .post-body .separator img,
    .post-body .tr-caption-container img,
    .post-body table img {
        max-width: 100% !important;
        height: auto !important;
        display: block;
        margin: 0 auto;
        box-sizing: border-box;
    }

    /* Handle iframes/videos (YouTube etc) */
    .post-body iframe,
    .post-body object,
    .post-body embed,
    .post-body video {
        max-width: 100% !important;
        box-sizing: border-box;
    }

    /* Constrain the containers */
    .post-body .separator,
    .post-body .tr-caption-container,
    .post-body table {
        max-width: 100% !important;
        box-sizing: border-box;
    }

    /* Fix for <a> tags wrapping images */
    .post-body .separator a {
        display: block;
        max-width: 100%;
    }

    /* Prevent overflow globally */
    .post-body {
        overflow-wrap: break-word;
        word-wrap: break-word;
        word-break: break-word;
        overflow: hidden; /* Cut off anything that still refuses to shrink */
    }

    /* Layout Wrapper */
    .site-wrapper {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        width: 100%; /* Ensure wrapper doesn't overflow */
        overflow-x: hidden; /* Safety net */
    }
    .content-wrapper {
        max-width: 1200px;
        margin: 30px auto;
        padding: 0 20px;
        display: grid;
        grid-template-columns: 1fr 300px;
        gap: 30px;
        width: 100%;
        flex: 1;
    }

    /* FIX: Allow Grid items to shrink so internal scrollbars work */
    #main-wrapper, #sidebar-wrapper {
        min-width: 0;
        max-width: 100%;
    }


    /* Header */
    #header-wrapper {
        background: var(--surface-color);
        box-shadow: var(--shadow);
        position: sticky;
        top: 0;
        z-index: 1000;
        height: var(--header-height);
        display: flex;
        align-items: center;
        padding: 0 20px;
    }
    .header .header-widget {
        display: flex;
        align-items: center;
    }
    .header h1.title {
        margin: 0;
        font-size: 24px;
        font-weight: 700;
    }
    .header h1.title a { color: var(--text-color); }
    .header .description { display: none; } /* Hide description in header for cleaner look */

    /* Navigation & Tools (Placeholder for JS injection) */
    .nav-tools {
        margin-left: auto;
        display: flex;
        gap: 15px;
        align-items: center;
    }
    .theme-toggle, .search-trigger {
        cursor: pointer;
        padding: 8px;
        border-radius: 50%;
        background: var(--bg-color);
        border: 1px solid var(--border-color);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--text-color);
    }
    .search-trigger:hover, .theme-toggle:hover {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
    }

    /* Secondary Nav (Scrollable) */
    .secondary-nav-wrapper {
        background: var(--surface-color);
        border-bottom: 1px solid var(--border-color);
        padding: 0 20px;
        position: relative;
        z-index: 900;
    }
    .scroll-menu {
        overflow-x: auto;
        white-space: nowrap;
        -webkit-overflow-scrolling: touch;
        padding: 15px 0;
        max-width: 1200px;
        margin: 0 auto;
    }
    /* Hide scrollbar */
    .scroll-menu::-webkit-scrollbar { display: none; }
    .scroll-menu ul {
        display: flex;
        gap: 15px;
        margin: 0;
        padding: 0;
        list-style: none;
    }
    .scroll-menu a {
        color: var(--text-secondary);
        font-size: 14px;
        font-weight: 500;
        padding: 8px 16px;
        border-radius: 20px;
        background: var(--bg-color);
        display: inline-block;
        transition: 0.2s;
    }
    .scroll-menu a:hover {
        background: var(--primary-color);
        color: #fff;
        transform: translateY(-2px);
    }

    /* News Ticker */
    .news-ticker-wrapper {
        background: var(--surface-color);
        border-bottom: 1px solid var(--border-color);
        height: 45px;
        overflow: hidden;
        position: relative;
    }
    .ticker-container {
        display: flex;
        align-items: center;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
        height: 100%;
    }
    .ticker-label {
        background: var(--primary-color);
        color: white;
        padding: 5px 12px;
        font-size: 12px;
        font-weight: 700;
        text-transform: uppercase;
        border-radius: 4px;
        margin-right: 15px;
        flex-shrink: 0;
        z-index: 2;
    }
    .ticker-content {
        flex-grow: 1;
        overflow: hidden;
        position: relative;
        height: 100%;
        display: flex;
        align-items: center;
    }
    .ticker-wrap {
        width: 100%;
        overflow: hidden;
        white-space: nowrap;
    }
    .ticker-move {
        display: inline-block;
        white-space: nowrap;
        animation: ticker 30s linear infinite;
    }
    .ticker-move:hover {
        animation-play-state: paused;
    }
    .ticker-item {
        display: inline-block;
        padding: 0 20px;
        font-size: 14px;
    }
    .ticker-item a {
        color: var(--text-color);
        text-decoration: none;
        font-weight: 500;
    }
    .ticker-item a:hover {
        color: var(--primary-color);
    }
    @keyframes ticker {
        0% { transform: translateX(0); }
        100% { transform: translateX(-50%); }
    }

    /* Search Overlay */
    .search-overlay {
        position: fixed; top: 0; left: 0; right: 0; bottom: 0;
        background: rgba(0,0,0,0.85);
        z-index: 2000;
        display: none;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(5px);
    }
    .search-overlay.active { display: flex; animation: fadeIn 0.3s ease; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

    .search-box {
        background: var(--surface-color);
        padding: 30px;
        border-radius: 12px;
        display: flex;
        flex-direction: column;
        gap: 15px;
        width: 90%;
        max-width: 600px;
        position: relative;
        box-shadow: 0 10px 25px rgba(0,0,0,0.2);
    }
    .search-form { display: flex; gap: 10px; }
    .search-box input {
        flex: 1;
        padding: 15px;
        border: 2px solid var(--border-color);
        border-radius: 8px;
        background: var(--bg-color);
        color: var(--text-color);
        font-size: 1.1rem;
        outline: none;
    }
    .search-box input:focus { border-color: var(--primary-color); }
    .search-box button.search-btn {
        padding: 15px 30px;
        background: var(--primary-color);
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        font-size: 1rem;
    }
    @media (max-width: 480px) {
        .search-box {
            padding: 20px;
            width: 95%;
        }
        .search-form {
            flex-direction: column;
        }
        .search-box button.search-btn {
            width: 100%;
            margin-top: 10px;
        }
    }
    .close-search {
        position: absolute;
        top: -50px;
        right: 0;
        background: none;
        color: white;
        font-size: 40px;
        cursor: pointer;
        border: none;
        padding: 0;
        line-height: 1;
    }


    /* Grid Layout for Posts */
    .blog-posts {
        display: grid;
        grid-template-columns: repeat(2, 1fr); /* Force 2 columns by default on larger screens */
        gap: 20px;
    }
    /* Styles specifically for the homepage/index view */
    body.index .blog-posts {
        /* Grid is active */
    }
    body.item .blog-posts {
        display: block; /* Single column for single post */
    }

    /* Post Card (Grid Item) */
    .post-outer {
        background: var(--surface-color);
        border-radius: 8px;
        overflow: hidden;
        box-shadow: var(--shadow);
        transition: transform 0.2s;
        display: flex;
        flex-direction: column;
    }
    body.index .post-outer:hover {
        transform: translateY(-5px);
    }
    .post-title {
        margin: 0;
        padding: 15px 20px;
        font-size: 1.2rem;
    }
    .post-title a { color: var(--text-color); }
    .post-snippet {
        padding: 0 20px 20px;
        color: var(--text-secondary);
        font-size: 0.95rem;
        flex-grow: 1;
    }

    /* Single Post Styling */
    .post-body {
        font-size: 1.1rem;
        color: var(--text-color);
    }
    .post-body h2, .post-body h3 {
        margin-top: 1.5em;
        margin-bottom: 0.5em;
    }

    /* Modern Tables - Responsive Fix */
    .post-body table {
        display: table;
        width: 100%;
        border-collapse: collapse;
        margin: 0; /* Margin handled by wrapper */
        background: var(--surface-color);
        table-layout: auto; /* Allow columns to adjust based on content */
    }

    .table-wrapper {
        display: block;
        width: 100%;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch; /* Smooth scroll on iOS */
        margin: 20px 0;
        box-shadow: var(--shadow);
        border-radius: 8px;
        background: var(--surface-color);
        border: 1px solid var(--border-color); /* Ensure visibility */
    }

    .post-body th, .post-body td {
        padding: 12px 15px;
        border-bottom: 1px solid var(--border-color);
        text-align: left;
        white-space: nowrap; /* Force horizontal scrolling instead of wrapping */
        min-width: 120px; /* Ensure columns have reasonable width */
        word-wrap: break-word; /* Prevent words from overflowing */
    }

    .post-body th {
        background-color: var(--primary-color);
        color: white;
        font-weight: 700; /* Bold header as requested */
        text-transform: uppercase;
        font-size: 0.9em;
        letter-spacing: 0.5px;
    }
    .post-body tr:last-child td { border-bottom: none; }
    .post-body tr:nth-child(even) { background-color: var(--bg-color); }
    
    @media (max-width: 1200px) {
    .post-body table {
        display: block; /* Make table scrollable */
        overflow-x: auto; /* Enable horizontal scroll */
        white-space: nowrap; /* Ensure no wrapping */
    }
}

    /* Quotes, Lyrics, Shayari */
    blockquote, .quote-box, .lyrics-box {
        position: relative;
        background: var(--bg-color);
        padding: 25px;
        margin: 20px 0;
        border-left: 5px solid var(--primary-color);
        border-radius: 0 8px 8px 0;
        font-style: italic;
        color: var(--text-secondary);
    }
    .lyrics-box {
        text-align: center;
        font-style: normal;
        white-space: pre-line; /* Preserves line breaks for lyrics */
        background: var(--surface-color);
        border: 1px solid var(--border-color);
        border-left: none;
        border-top: 5px solid var(--primary-color);
        border-radius: 8px;
    }

    /* Action Buttons (Copy/Share) */
    .action-buttons {
        position: absolute;
        top: 10px;
        right: 10px;
        display: flex;
        gap: 5px;
        opacity: 1; /* Always visible as per request */
        z-index: 10;
    }
    .action-btn {
        background: var(--surface-color);
        border: 1px solid var(--border-color);
        color: var(--text-secondary);
        width: 32px;
        height: 32px;
        border-radius: 4px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        transition: 0.2s;
    }
    .action-btn:hover {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
    }

    /* Sidebar */
    #sidebar-wrapper {
        min-width: 300px;
    }
    .sidebar .widget {
        background: var(--surface-color);
        padding: 20px;
        margin-bottom: 20px;
        border-radius: 8px;
        box-shadow: var(--shadow);
    }

    /* Social Icons Widget (Sidebar) */
    .social-list {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
        justify-content: center;
    }
    .social-icon-link {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: var(--bg-color);
        color: var(--text-secondary);
        border: 1px solid var(--border-color);
        transition: all 0.2s ease;
    }
    .social-icon-link:hover {
        background: var(--primary-color);
        color: #fff;
        border-color: var(--primary-color);
        transform: translateY(-3px);
    }
    .social-icon-link svg {
        width: 20px;
        height: 20px;
    }
    /* Hide the Middle Ad widget in the sidebar (it will be moved by JS) */
    #HTML3 { display: none; }
    .sidebar h2 {
        margin-top: 0;
        font-size: 18px;
        border-bottom: 2px solid var(--primary-color);
        display: inline-block;
        padding-bottom: 5px;
        margin-bottom: 15px;
    }

    /* Footer */
    #footer-wrapper {
        background: var(--surface-color);
        padding: 40px 20px;
        margin-top: auto;
        text-align: center;
        border-top: 1px solid var(--border-color);
    }
    .footer-credits {
        font-size: 16px;
        font-weight: 700; /* Bold as requested */
        color: var(--text-color);
        letter-spacing: 0.5px;
        text-transform: capitalize;
    }
    .footer-credits a {
        color: var(--primary-color);
        text-decoration: none;
    }
    .heart {
        color: #e25555;
        display: inline-block;
        animation: heartbeat 1.5s infinite;
    }
    @keyframes heartbeat {
        0% { transform: scale(1); }
        50% { transform: scale(1.2); }
        100% { transform: scale(1); }
    }

    /* Share Buttons */
    .share-buttons { display: flex; gap: 10px; margin: 30px 0; flex-wrap: wrap; }
    .share-btn-main { flex: 1; display: flex; align-items: center; justify-content: center; gap: 8px; padding: 12px; border-radius: 8px; color: white; font-weight: 600; transition: 0.2s; min-width: 120px; border: none; cursor: pointer; font-size: 14px; }
    .share-btn-main:hover { opacity: 0.9; transform: translateY(-2px); }
    .share-fb { background: #1877f2; }
    .share-tw { background: #1da1f2; }
    .share-wa { background: #25d366; }
    .share-copy { background: var(--surface-color); color: var(--text-color); border: 1px solid var(--border-color); }

    /* Related Posts */
    #related-posts { margin: 40px 0; }
    #related-posts h3 { margin: 0 0 20px; border-left: 4px solid var(--primary-color); padding-left: 15px; font-size: 1.3rem; color: var(--text-color); }
    .related-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; }
    .related-item { background: var(--surface-color); border-radius: 8px; overflow: hidden; box-shadow: var(--shadow); transition: 0.2s; display: block; border: 1px solid var(--border-color); }
    .related-item:hover { transform: translateY(-3px); }
    .related-thumb { height: 140px; background: #eee; overflow: hidden; position: relative; }
    .related-thumb img { width: 100%; height: 100%; object-fit: cover; transition: 0.3s; }
    .related-item:hover .related-thumb img { transform: scale(1.05); }
    .related-title { padding: 15px; font-size: 0.95rem; font-weight: 600; display: block; color: var(--text-color); line-height: 1.4; }

    /* Comments System Styling */
    .comments-content {
        margin: 40px 0;
        background: var(--surface-color);
        border-radius: 16px;
        padding: 30px;
        box-shadow: var(--shadow);
        border: 1px solid var(--border-color);
    }
    .comments-header h3 {
        margin: 0 0 25px;
        padding-bottom: 15px;
        border-bottom: 2px solid var(--border-color);
        font-size: 1.5rem;
        color: var(--text-color);
        font-weight: 800;
        letter-spacing: -0.5px;
    }

    .comment-thread {
        margin-bottom: 25px;
        position: relative;
    }

    .comment {
        display: flex;
        gap: 15px;
        margin-bottom: 15px;
    }

    .comment-avatar img {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid var(--border-color);
        background: var(--bg-color);
    }

    .comment-block {
        flex: 1;
        background: var(--bg-color);
        padding: 15px 20px;
        border-radius: 0 12px 12px 12px;
        border: 1px solid var(--border-color);
        position: relative;
    }

    /* Threaded Replies (Nested) */
    .comment-replies {
        margin-left: 65px; /* Indent replies */
        border-left: 2px solid var(--border-color);
        padding-left: 20px;
    }

    .comment-replies .comment-avatar img {
        width: 40px;
        height: 40px;
    }

    .comment-header {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 8px;
        flex-wrap: wrap;
    }

    .comment-header .user {
        font-weight: 700;
        color: var(--text-color);
        font-size: 1rem;
    }
    .comment-header .user a {
        color: var(--text-color);
    }

    .comment-header .time {
        font-size: 0.8rem;
        color: var(--text-secondary);
    }

    .comment-content {
        color: var(--text-color);
        font-size: 0.95rem;
        line-height: 1.5;
        word-wrap: break-word;
    }

    .reply-btn a {
        display: inline-block;
        font-size: 0.8rem;
        font-weight: 600;
        color: var(--primary-color);
        text-transform: uppercase;
        cursor: pointer;
        margin-left: auto;
    }
    .reply-btn a:hover { text-decoration: underline; }

    /* Comment Form Iframe Styling - FIX FOR DARK MODE */
    .comment-form-wrapper iframe, .comment-form iframe {
        min-height: 250px;
        border: none;
        margin: 0;
        background: transparent !important; /* Force override of any inline styles */
        width: 100%;
        display: block;
        color-scheme: light; /* Hint to browser to render default controls in light mode */
    }

    /* CRITICAL FIX: Always force light background for the comment form container */
    .comment-form-wrapper {
        display: none; /* Hidden by default - triggered by button */
        padding: 20px;
        background: #ffffff !important;
        border-radius: 8px;
        border: 1px solid #ddd;
        margin-top: 20px;
        color: #333333; /* Ensure wrapper text is dark */
        animation: slideDown 0.3s ease-out;
        position: relative; /* Context for absolute loading text */
        min-height: 250px;
    }
    @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

    .btn-add-comment {
        display: block;
        width: 100%;
        max-width: 250px;
        margin: 30px auto 0;
        background: var(--primary-color);
        color: #fff;
        padding: 15px 25px;
        font-size: 1rem;
        font-weight: 700;
        border: none;
        border-radius: 50px;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        transition: all 0.3s ease;
        text-align: center;
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    .btn-add-comment:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 15px rgba(0,0,0,0.2);
        opacity: 0.95;
    }

    /* Add a header inside the wrapper to make it look intentional */
    .comment-form-wrapper:before {
        content: "Leave a Reply";
        display: block;
        font-weight: 700;
        margin-bottom: 15px;
        font-size: 1.1rem;
        color: #333333;
        border-bottom: 2px solid #eee;
        padding-bottom: 10px;
        position: relative;
        z-index: 5; /* Ensure header is above loading text */
        background: #fff; /* Ensure opaque background if needed */
    }

    /* Hide some default Blogger ugliness if possible via CSS */
    .paging-control-container {
        display: block;
        margin-bottom: 20px;
        text-align: right;
        font-size: 0.9rem;
    }

    /* Mobile Comments */
    @media (max-width: 600px) {
        .comment-replies {
            margin-left: 10px;
            padding-left: 10px;
            border-left: 2px solid var(--border-color);
        }
        .comments-content { padding: 15px; }
        .comment-avatar img { width: 40px; height: 40px; }
    }

    /* Custom Formats: Gallery & Video */
    .gallery-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px; margin: 20px 0; }
    .gallery-grid img { width: 100%; height: 150px; object-fit: cover; border-radius: 6px; cursor: pointer; transition: 0.2s; }
    .gallery-grid img:hover { transform: scale(1.02); }
    .video-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 8px; margin: 20px 0; background: #000; }
    .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }

    /* Responsive */
    @media (max-width: 900px) {
        .content-wrapper {
            display: block; /* Switch to block layout on mobile for better control */
            padding: 0 15px; /* Slightly reduce padding on mobile */
        }
        #sidebar-wrapper {
            width: 100%;
            min-width: 0; /* crucial: remove min-width constraint */
            margin-top: 30px;
        }
    }
    @media (max-width: 768px) {
        .blog-posts {
            grid-template-columns: 1fr; /* Single column grid on mobile/tablet portrait */
        }
        .main-menu { display: none; } /* Standard menu hidden on mobile */
    }
    ]]></b:skin>
</head>
<body>
    <!-- Search Overlay Structure -->
    <div class='search-overlay' id='search-overlay'>
        <button class='close-search' id='close-search'>&#215;</button>
        <div class='search-box'>
            <h3 style='margin:0 0 10px 0; color:var(--text-color);'>Search</h3>
            <form action='/search' class='search-form' method='get'>
                <input name='q' placeholder='Type to search...' type='text'/>
                <button class='search-btn' type='submit'>Search</button>
            </form>
        </div>
    </div>

    <div class='site-wrapper'>
        <header id='header-wrapper'>
            <div class='header-container' style='display:flex; width:100%; max-width:1200px; margin:0 auto; align-items:center;'>
                <b:section class='header' id='header' maxwidgets='1' showaddelement='no'>
                    <b:widget id='Header1' locked='true' title='Header' type='Header' version='2' visible='true'>
                        <b:widget-settings>
                            <b:widget-setting name='displayUrl'/>
                            <b:widget-setting name='displayHeight'>0</b:widget-setting>
                            <b:widget-setting name='sectionWidth'>-1</b:widget-setting>
                            <b:widget-setting name='useImage'>false</b:widget-setting>
                            <b:widget-setting name='shrinkToFit'>false</b:widget-setting>
                            <b:widget-setting name='imagePlacement'>BEHIND</b:widget-setting>
                            <b:widget-setting name='displayWidth'>0</b:widget-setting>
                        </b:widget-settings>
                        <b:includable id='main'>
                            <div class='header-widget'>
                                <h1 class='title'>
                                    <b:include name='title'/>
                                </h1>
                            </div>
                        </b:includable>
                        <b:includable id='description'>
                            <data:description/>
                        </b:includable>
                        <b:includable id='title'>
                            <a expr:href='data:blog.homepageUrl'><data:title/></a>
                        </b:includable>
                    </b:widget>
                </b:section>

                <b:section class='main-menu' id='main-menu' maxwidgets='1' showaddelement='yes'>
                     <b:widget id='LinkList1' locked='false' title='Menu' type='LinkList' version='2' visible='true'>
                        <b:widget-settings>
                          <b:widget-setting name='text-0'>Home</b:widget-setting>
                          <b:widget-setting name='link-0'>/</b:widget-setting>
                          <b:widget-setting name='text-1'>About</b:widget-setting>
                          <b:widget-setting name='link-1'>#</b:widget-setting>
                          <b:widget-setting name='sorting'>NONE</b:widget-setting>
                        </b:widget-settings>
                        <b:includable id='main'>
                            <nav class='main-nav'>
                                <ul>
                                    <b:loop values='data:links' var='link'>
                                        <li><a expr:href='data:link.target'><data:link.name/></a></li>
                                    </b:loop>
                                </ul>
                            </nav>
                        </b:includable>
                     </b:widget>
                </b:section>

                <div class='nav-tools'>
                    <div class='search-trigger' id='search-trigger' title='Search'>
                        <svg class='icon-search' fill='none' height='20' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24' width='20' xmlns='http://www.w3.org/2000/svg'><circle cx='11' cy='11' r='8'/><line x1='21' y1='21' x2='16.65' y2='16.65'/></svg>
                    </div>
                    <button class='theme-toggle' id='theme-toggle' aria-label='Toggle Dark Mode' title='Toggle Dark Mode'>
                        <svg class='icon-moon' fill='none' height='20' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24' width='20' xmlns='http://www.w3.org/2000/svg'><path d='M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z'/></svg>
                        <svg class='icon-sun' fill='none' height='20' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24' width='20' xmlns='http://www.w3.org/2000/svg' style='display:none;'><circle cx='12' cy='12' r='5'/><line x1='12' y1='1' x2='12' y2='3'/><line x1='12' y1='21' x2='12' y2='23'/><line x1='4.22' y1='4.22' x2='5.64' y2='5.64'/><line x1='18.36' y1='18.36' x2='19.78' y2='19.78'/><line x1='1' y1='12' x2='3' y2='12'/><line x1='21' y1='12' x2='23' y2='12'/><line x1='4.22' y1='19.78' x2='5.64' y2='18.36'/><line x1='18.36' y1='5.64' x2='19.78' y2='4.22'/></svg>
                    </button>
                </div>
            </div>
            <style>
                /* Quick Menu Styles */
                .main-menu { flex-grow: 1; padding: 0 20px; }
                .main-nav ul { list-style: none; margin: 0; padding: 0; display: flex; gap: 20px; justify-content: flex-end;}
                .main-nav a { color: var(--text-color); font-weight: 500; font-size: 14px; text-transform: uppercase; letter-spacing: 0.5px;}
            </style>
        </header>

        <!-- Secondary Navigation (Topics) -->
        <div class='secondary-nav-wrapper'>
            <b:section class='secondary-menu' id='secondary-menu' showaddelement='yes'>
                <b:widget id='LinkList2' locked='false' title='Topics' type='LinkList' version='2' visible='true'>
                    <b:widget-settings>
                        <b:widget-setting name='text-0'>Trending</b:widget-setting>
                        <b:widget-setting name='link-0'>#</b:widget-setting>
                        <b:widget-setting name='text-1'>Quotes</b:widget-setting>
                        <b:widget-setting name='link-1'>#</b:widget-setting>
                        <b:widget-setting name='text-2'>Poetry</b:widget-setting>
                        <b:widget-setting name='link-2'>#</b:widget-setting>
                        <b:widget-setting name='text-3'>Lyrics</b:widget-setting>
                        <b:widget-setting name='link-3'>#</b:widget-setting>
                        <b:widget-setting name='text-4'>Life</b:widget-setting>
                        <b:widget-setting name='link-4'>#</b:widget-setting>
                        <b:widget-setting name='sorting'>NONE</b:widget-setting>
                    </b:widget-settings>
                    <b:includable id='main'>
                       <div class='scroll-menu'>
                           <ul>
                               <b:loop values='data:links' var='link'>
                                   <li><a expr:href='data:link.target'><data:link.name/></a></li>
                               </b:loop>
                           </ul>
                       </div>
                    </b:includable>
                </b:widget>
            </b:section>
        </div>

        <!-- News Ticker (Homepage Only) -->
        <b:if cond='data:view.isHomepage'>
            <div class='news-ticker-wrapper'>
                <div class='ticker-container'>
                    <div class='ticker-label'>Latest</div>
                    <div class='ticker-content' id='ticker-content'>
                        <!-- JS will populate this -->
                        <span>Loading...</span>
                    </div>
                </div>
            </div>
        </b:if>

        <div class='content-wrapper'>
            <main id='main-wrapper'>
                <b:section class='main' id='main' showaddelement='no'>
                    <b:widget id='HTML10' locked='false' title='Top Ad (Homepage)' type='HTML' version='2' visible='true'>
                        <b:widget-settings>
                            <b:widget-setting name='content'><![CDATA[
                                <div style="background:var(--ad-bg); padding:20px; text-align:center; margin-bottom: 30px; border-radius: 8px;">
                                    <span style="color:var(--text-secondary); font-weight:bold;">Top Ad Space</span>
                                </div>
                            ]]></b:widget-setting>
                        </b:widget-settings>
                        <b:includable id='main'>
                            <div class='widget-content'>
                                <data:content/>
                            </div>
                        </b:includable>
                    </b:widget>
                    <b:widget id='Blog1' locked='true' title='Blog Posts' type='Blog' version='2' visible='true'>
                        <b:includable id='main' var='top'>
                            <b:comment>### Main Loop ###</b:comment>

                            <b:if cond='data:view.isMultipleItems'>
                                <!-- Grid View -->
                                <div class='blog-posts'>
                                    <b:loop index='i' values='data:posts' var='post'>
                                        <b:include data='post' name='post-card'/>
                                        <b:if cond='(data:i + 1) % 4 == 0'>
                                           <!-- Injected Grid Ad (Spans 2 columns) -->
                                           <div class='post-outer ad-grid-item' style='grid-column: 1 / -1; height: auto; min-height: 250px; display: flex; align-items: center; justify-content: center; background: var(--ad-bg); box-shadow: var(--shadow); border-radius: 8px;'>
                                               <!-- Content Injected via JS from HTML12 -->
                                           </div>
                                        </b:if>
                                    </b:loop>
                                </div>
                                <div class='blog-pager'>
                                    <b:include name='nextprev'/>
                                </div>
                            <b:else/>
                                <!-- Single Post View -->
                                <b:loop values='data:posts' var='post'>
                                    <b:include data='post' name='post-full'/>
                                </b:loop>
                            </b:if>
                        </b:includable>

                        <b:includable id='post-card' var='post'>
                            <div class='post-outer'>
                                <b:if cond='data:post.featuredImage'>
                                    <div class='post-thumbnail'>
                                        <a expr:href='data:post.url' expr:title='data:post.title'>
                                            <b:include data='{                                                 image: data:post.featuredImage,                                                 imageSizes: [300, 600],                                                 originalWidth: 600,                                                 originalHeight: 400                                              }' name='responsiveImage'/>
                                        </a>
                                    </div>
                                </b:if>
                                <h2 class='post-title'>
                                    <a expr:href='data:post.url'><data:post.title/></a>
                                </h2>
                                <div class='post-snippet'>
                                    <data:post.snippet/>
                                </div>
                                <div class='post-footer' style='padding: 0 20px 20px;'>
                                    <a class='read-more' expr:href='data:post.url' style='color:var(--primary-color); font-weight:600;'>Read More â†’</a>
                                </div>
                            </div>
                        </b:includable>

                        <b:includable id='post-full' var='post'>
                            <article class='post hentry' itemprop='blogPost' itemscope='itemscope' itemtype='http://schema.org/BlogPosting'>
                                <h1 class='post-title entry-title' itemprop='headline'><data:post.title/></h1>
                                <meta expr:content='data:post.url' itemprop='url'/>
                                <meta expr:content='data:post.thumbnailUrl' itemprop='image'/>

                                <div class='post-meta' style='color:var(--text-secondary); margin-bottom: 20px; font-size: 0.9rem;'>
                                    <!-- Dynamic Author Name (Use AliasNull in Footer for Theme Credit) -->
                                    <span class='post-author' itemprop='author' itemscope='itemscope' itemtype='http://schema.org/Person'>
                                        By <span itemprop='name'><data:post.author.name/></span>
                                    </span>
                                    <span class='post-date'> on <span itemprop='datePublished'><data:post.date/></span></span>
                                </div>

                                <!-- Ad Slot: Below Title (Target) -->
                                <div id='ad-target-title' class='ad-slot ad-below-title'></div>

                                <div class='post-body entry-content' id='post-body' itemprop='articleBody'>
                                    <data:post.body/>
                                    <div style='clear: both;'/>
                                </div>

                                <!-- Ad Slot: Below Content (Target) -->
                                <div id='ad-target-bottom' class='ad-slot ad-below-content'></div>

                                <!-- Share Buttons -->
                                <div class='share-buttons'>
                                    <a class='share-btn-main share-fb' expr:href='"https://www.facebook.com/sharer.php?u=" + data:post.url' target='_blank' rel='nofollow'>Facebook</a>
                                    <a class='share-btn-main share-tw' expr:href='"https://twitter.com/intent/tweet?url=" + data:post.url + "&amp;text=" + data:post.title' target='_blank' rel='nofollow'>Twitter</a>
                                    <a class='share-btn-main share-wa' expr:href='"https://api.whatsapp.com/send?text=" + data:post.title + " - " + data:post.url' target='_blank' rel='nofollow'>WhatsApp</a>
                                    <button class='share-btn-main share-copy' id='copy-link-btn' expr:data-url='data:post.url'>Copy Link</button>
                                </div>

                                <!-- Related Posts Container -->
                                <div id='related-posts'>
                                    <h3>You Might Also Like</h3>
                                    <div class='related-grid' id='related-grid-content'>
                                        <!-- JS will populate this -->
                                        <div style="text-align:center; padding:20px; color:var(--text-secondary);">Loading...</div>
                                    </div>
                                    <!-- Hidden data for JS to pick up -->
                                    <b:if cond='data:post.labels'>
                                        <div id='related-post-data' style='display:none;' expr:data-label='data:post.labels.first.name'></div>
                                    </b:if>
                                </div>

                                <div class='post-labels'>
                                    <b:if cond='data:post.labels'>
                                        <span>Tags: </span>
                                        <b:loop values='data:post.labels' var='label'>
                                            <a expr:href='data:label.url' rel='tag'><data:label.name/></a><b:if cond='!data:label.isLast'>, </b:if>
                                        </b:loop>
                                    </b:if>
                                </div>
                            </article>

                            <!-- Comments -->
                            <b:if cond='data:post.allowComments'>
                                <b:include data='post' name='comment_picker'/>
                            </b:if>
                        </b:includable>

                        <b:includable id='nextprev'>
                            <div class='blog-pager' id='blog-pager'>
                                <b:if cond='data:newerPageUrl'>
                                    <a class='blog-pager-newer-link' expr:href='data:newerPageUrl' expr:id='data:widget.instanceId + "_blog-pager-newer-link"' title='Newer Posts'>Newer Posts</a>
                                </b:if>
                                <b:if cond='data:olderPageUrl'>
                                    <a class='blog-pager-older-link' expr:href='data:olderPageUrl' expr:id='data:widget.instanceId + "_blog-pager-older-link"' title='Older Posts'>Older Posts</a>
                                </b:if>
                            </div>
                        </b:includable>

                        <b:includable id='comment_picker' var='post'>
                            <div class='comments' id='comments'>
                                <b:if cond='data:post.commentSource == 1'>
                                    <b:include data='post' name='iframe_comments'/>
                                <b:elseif cond='data:post.showThreadedComments'/>
                                    <b:include data='post' name='threaded_comments'/>
                                <b:else/>
                                    <b:include data='post' name='comments'/>
                                </b:if>
                            </div>
                        </b:includable>

                        <b:includable id='iframe_comments' var='post'>
                            <b:if cond='data:post.allowIframeComments'>
                                <script expr:src='data:post.iframeCommentSrc' type='text/javascript'/>
                                <div class='cmt_iframe_holder' expr:data-href='data:post.url' expr:data-viewtype='data:post.viewType'/>
                                <b:if cond='data:post.embedCommentForm == false'>
                                    <a expr:href='data:post.addCommentUrl' expr:onclick='data:post.addCommentOnclick'>Post a Comment</a>
                                </b:if>
                            </b:if>
                        </b:includable>

                        <b:includable id='comments' var='post'>
                            <div class='comments-content'>
                                <b:if cond='data:post.commentPagingRequired'>
                                    <span class='paging-control-container'>
                                        <a expr:class='data:post.oldLinkClass' expr:href='data:post.oldestLinkUrl'><data:post.oldestLinkText/></a>
                                        &#160;
                                        <a expr:class='data:post.oldLinkClass' expr:href='data:post.olderLinkUrl'><data:post.olderLinkText/></a>
                                        &#160;
                                        <data:post.commentRangeText/>
                                        &#160;
                                        <a expr:class='data:post.newLinkClass' expr:href='data:post.newerLinkUrl'><data:post.newerLinkText/></a>
                                        &#160;
                                        <a expr:class='data:post.newLinkClass' expr:href='data:post.newestLinkUrl'><data:post.newestLinkText/></a>
                                    </span>
                                </b:if>
                                <div id='comment-holder'>
                                   <b:loop values='data:post.comments' var='comment'>
                                       <div class='comment-thread'>
                                           <div class='comment' expr:id='data:comment.anchorName'>
                                               <div class='comment-avatar'>
                                                   <b:if cond='data:comment.authorAvatarSrc'>
                                                       <img expr:src='data:comment.authorAvatarSrc' alt='Avatar'/>
                                                   <b:else/>
                                                       <img src='https://via.placeholder.com/40' alt='Avatar'/>
                                                   </b:if>
                                               </div>
                                               <div class='comment-block'>
                                                   <div class='comment-header'>
                                                       <span class='user'><data:comment.author/></span>
                                                       <span class='time'><data:comment.timestamp/></span>
                                                   </div>
                                                   <div class='comment-content'>
                                                       <data:comment.body/>
                                                   </div>
                                               </div>
                                           </div>
                                       </div>
                                   </b:loop>
                                </div>
                                <div class='comment-footer'>
                                    <b:if cond='data:post.embedCommentForm'>
                                        <b:if cond='data:post.allowNewComments'>
                                            <button class='btn-add-comment' id='btn-comment-toggle-legacy' onclick='toggleCommentForm()'>Post a Comment</button>
                                            <div class='comment-form-wrapper' id='comment-form-wrapper'>
                                                <div class='loading-placeholder' style='position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); color:#666; font-size:14px;'>Loading Comments...</div>
                                                <a expr:href='data:post.commentFormIframeSrc' id='comment-editor-src'/>
                                                <iframe class='blogger-iframe-colorize blogger-comment-from-post' id='comment-editor' name='comment-editor' expr:src='data:post.commentFormIframeSrc' width='100%' style='position:relative; z-index:2;'/>
                                            </div>
                                        <b:else/>
                                            <data:post.noNewCommentsText/>
                                        </b:if>
                                    <b:else/>
                                        <b:if cond='data:post.allowComments'>
                                            <a expr:href='data:post.addCommentUrl' expr:onclick='data:post.addCommentOnclick'>Post a Comment</a>
                                        </b:if>
                                    </b:if>
                                </div>
                            </div>
                        </b:includable>

                        <b:includable id='threaded_comments' var='post'>
                            <div class='comments-content'>
                                <div class='comments-header'>
                                    <h3 class='title'><data:post.commentLabelFull/>:</h3>
                                </div>
                                <div class='comments-list'>
                                    <b:loop values='data:post.comments' var='comment'>
                                        <div class='comment-thread'>
                                            <b:include data='comment' name='comment_thread'/>
                                        </div>
                                    </b:loop>
                                </div>
                                <div class='comments-footer'>
                                     <button class='btn-add-comment' id='btn-comment-toggle' onclick='toggleCommentForm()'>Post a Comment</button>
                                     <div class='comment-form-wrapper' id='comment-form-wrapper'>
                                         <div class='loading-placeholder' style='position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); color:#666; font-size:14px;'>Loading Comments...</div>
                                         <a expr:href='data:post.commentFormIframeSrc' id='comment-editor-src'/>
                                         <iframe class='blogger-iframe-colorize blogger-comment-from-post' id='comment-editor' name='comment-editor' expr:src='data:post.commentFormIframeSrc' width='100%' style='position:relative; z-index:2;'/>
                                     </div>
                                </div>
                            </div>
                        </b:includable>

                        <b:includable id='comment-form' var='post'>
                            <div class='comment-form-wrapper'>
                                <a expr:href='data:post.commentFormIframeSrc' id='comment-editor-src'/>
                                <iframe class='blogger-iframe-colorize blogger-comment-from-post' id='comment-editor' name='comment-editor' src='' width='100%'/>
                            </div>
                        </b:includable>

                        <b:includable id='comment_thread' var='comment'>
                            <div class='comment' expr:id='data:comment.anchorName'>
                                <div class='comment-avatar'>
                                    <b:if cond='data:comment.authorAvatarSrc'>
                                        <img expr:src='data:comment.authorAvatarSrc' alt='Avatar'/>
                                    <b:else/>
                                        <img src='https://via.placeholder.com/40' alt='Avatar'/>
                                    </b:if>
                                </div>
                                <div class='comment-block'>
                                    <div class='comment-header'>
                                        <span class='user'>
                                            <b:if cond='data:comment.authorUrl'>
                                                <a expr:href='data:comment.authorUrl' rel='nofollow'><data:comment.author/></a>
                                            <b:else/>
                                                <data:comment.author/>
                                            </b:if>
                                        </span>
                                        <span class='time'><data:comment.timestamp/></span>
                                        <span class='reply-btn'>
                                            <a expr:onclick='"javascript:replyToComment(\"" + data:comment.id + "\");return false;"' href='#'>Reply</a>
                                        </span>
                                    </div>
                                    <div class='comment-content'>
                                        <data:comment.body/>
                                    </div>
                                </div>
                            </div>
                            <!-- Nested Comments (Threaded) -->
                            <div class='comment-replies'>
                                <b:loop values='data:comment.children' var='child'>
                                    <div class='comment-reply'>
                                         <b:include data='child' name='comment_thread'/>
                                    </div>
                                </b:loop>
                            </div>
                        </b:includable>

                        <!-- Removed Duplicate comment-form includable -->

                         <!-- Helper for Responsive Image -->
                         <b:includable id='responsiveImage' var='info'>
                             <img expr:src='data:info.image' loading='lazy' style='width: 100%; height: 200px; object-fit: cover;'/>
                         </b:includable>

                    </b:widget>
                </b:section>
            </main>

            <aside id='sidebar-wrapper'>
                <b:section class='sidebar' id='sidebar' showaddelement='yes'>
                     <b:widget id='HTML1' locked='false' title='Ad Slot (Sidebar)' type='HTML' version='2' visible='true'>
                        <b:widget-settings>
                            <b:widget-setting name='content'>
                                <![CDATA[<div style="background:var(--ad-bg); padding:20px; text-align:center;">Sidebar Ad</div>]]>
                            </b:widget-setting>
                        </b:widget-settings>
                        <b:includable id='main'>
                            <div class='widget-content'>
                                <data:content/>
                            </div>
                        </b:includable>
                     </b:widget>

                     <b:widget id='LinkList3' locked='false' title='Follow Us' type='LinkList' version='2' visible='true'>
                        <b:widget-settings>
                          <b:widget-setting name='text-0'>Facebook</b:widget-setting>
                          <b:widget-setting name='link-0'>#</b:widget-setting>
                          <b:widget-setting name='text-1'>Twitter</b:widget-setting>
                          <b:widget-setting name='link-1'>#</b:widget-setting>
                          <b:widget-setting name='text-2'>Instagram</b:widget-setting>
                          <b:widget-setting name='link-2'>#</b:widget-setting>
                          <b:widget-setting name='sorting'>NONE</b:widget-setting>
                        </b:widget-settings>
                        <b:includable id='main'>
                            <div class='widget-content social-icons-widget'>
                                <ul class='social-list'>
                                    <b:loop values='data:links' var='link'>
                                        <li>
                                            <a expr:href='data:link.target' expr:title='data:link.name' class='social-icon-link'>
                                                <b:switch var='data:link.name'>
                                                    <b:case value='Facebook'/>
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-facebook"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg>
                                                    <b:case value='Twitter'/>
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg>
                                                    <b:case value='Instagram'/>
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-instagram"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg>
                                                    <b:case value='YouTube'/>
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-youtube"><path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon></svg>
                                                    <b:case value='Telegram'/>
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-send"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                                                    <b:case value='WhatsApp'/>
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-message-circle"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>
                                                    <b:case value='LinkedIn'/>
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-linkedin"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>
                                                    <b:default/>
                                                        <!-- Default Link Icon -->
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
                                                </b:switch>
                                            </a>
                                        </li>
                                    </b:loop>
                                </ul>
                            </div>
                        </b:includable>
                     </b:widget>

                     <b:widget id='Label1' locked='false' title='Categories' type='Label' version='2' visible='true'>
                        <b:widget-settings>
                            <b:widget-setting name='sorting'>ALPHA</b:widget-setting>
                            <b:widget-setting name='display'>LIST</b:widget-setting>
                            <b:widget-setting name='showFreqNumbers'>false</b:widget-setting>
                            <b:widget-setting name='selectedLabelsList'/>
                        </b:widget-settings>
                        <b:includable id='main'>
                            <b:if cond='data:title != ""'>
                                <h2><data:title/></h2>
                            </b:if>
                            <div class='widget-content'>
                                <ul>
                                    <b:loop values='data:labels' var='label'>
                                        <li>
                                            <a expr:href='data:label.url'><data:label.name/></a>
                                        </li>
                                    </b:loop>
                                </ul>
                            </div>
                        </b:includable>
                     </b:widget>

                     <b:widget id='HTML8' locked='false' title='Newsletter' type='HTML' version='2' visible='true'>
                        <b:widget-settings>
                            <b:widget-setting name='content'><![CDATA[
                                <div class="newsletter-widget" style="background:var(--bg-color); padding:20px; border-radius:8px; text-align:center;">
                                    <h3 style="margin-top:0; color:var(--primary-color);">Subscribe</h3>
                                    <p style="font-size:0.9em; margin-bottom:15px; color:var(--text-secondary);">Get the latest posts delivered right to your inbox.</p>
                                    <form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open('https://feedburner.google.com/fb/a/mailverify?uri=YOUR_FEEDBURNER_ID', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">
                                        <input type="text" name="email" placeholder="Enter your email" style="width:100%; padding:10px; border:1px solid var(--border-color); border-radius:4px; margin-bottom:10px; background:var(--surface-color); color:var(--text-color);">
                                        <input type="hidden" value="YOUR_FEEDBURNER_ID" name="uri"/>
                                        <input type="hidden" name="loc" value="en_US"/>
                                        <button type="submit" style="width:100%; padding:10px; background:var(--primary-color); color:white; border:none; border-radius:4px; font-weight:bold; cursor:pointer;">Subscribe Now</button>
                                    </form>
                                </div>
                            ]]></b:widget-setting>
                        </b:widget-settings>
                        <b:includable id='main'>
                            <div class='widget-content'>
                                <data:content/>
                            </div>
                        </b:includable>
                     </b:widget>

                     <b:widget id='HTML9' locked='false' title='Featured Product' type='HTML' version='2' visible='true'>
                        <b:widget-settings>
                            <b:widget-setting name='content'><![CDATA[
                                <div class="promo-card" style="background:linear-gradient(135deg, var(--primary-color), #8e44ad); color:white; padding:25px; border-radius:8px; text-align:center; position:relative; overflow:hidden;">
                                    <div style="font-size:3em; margin-bottom:10px; opacity:0.9;">ðŸš€</div>
                                    <h3 style="margin:0 0 10px; font-size:1.4em; color:white;">Join The Community</h3>
                                    <p style="margin:0 0 20px; font-size:0.95em; opacity:0.9;">Unlock exclusive content, resources, and more by becoming a member today.</p>
                                    <a href="#" style="display:inline-block; background:white; color:var(--primary-color); padding:10px 20px; border-radius:30px; font-weight:bold; text-transform:uppercase; font-size:0.85em; box-shadow:0 4px 6px rgba(0,0,0,0.2);">Learn More</a>
                                </div>
                            ]]></b:widget-setting>
                        </b:widget-settings>
                        <b:includable id='main'>
                            <div class='widget-content'>
                                <data:content/>
                            </div>
                        </b:includable>
                     </b:widget>

                     <b:widget id='HTML11' locked='false' title='Donation' type='HTML' version='2' visible='true'>
                        <b:widget-settings>
                            <b:widget-setting name='content'><![CDATA[
                                <div class="donation-widget" style="background:var(--surface-color); padding:20px; border-radius:8px; text-align:center; border: 1px solid var(--border-color);">
                                    <h3 style="margin-top:0; color:var(--primary-color);">Support Us</h3>
                                    <p style="font-size:0.9em; margin-bottom:15px; color:var(--text-secondary);">Your support helps us keep creating quality content.</p>
                                    <a href="#" style="display:inline-block; background:#2ecc71; color:white; padding:10px 20px; border-radius:30px; font-weight:bold; text-transform:uppercase; font-size:0.85em; box-shadow:0 4px 6px rgba(0,0,0,0.1);">Donate</a>
                                </div>
                            ]]></b:widget-setting>
                        </b:widget-settings>
                        <b:includable id='main'>
                            <div class='widget-content'>
                                <data:content/>
                            </div>
                        </b:includable>
                     </b:widget>
                </b:section>
            </aside>
        </div>

        <footer id='footer-wrapper'>
            <b:section class='footer' id='footer' showaddelement='yes'>
                <b:widget id='HTML2' locked='true' title='Copyright' type='HTML' version='2' visible='true'>
                     <b:widget-settings>
                        <b:widget-setting name='content'><![CDATA[<!-- Content handled dynamically -->]]></b:widget-setting>
                     </b:widget-settings>
                     <b:includable id='main'>
                        <div class='footer-credits'>
                           Made With <span class='heart'>â™¥ï¸</span> By <a expr:href='data:blog.homepageUrl'><data:blog.title/></a>
                        </div>
                     </b:includable>
                </b:widget>

                <!-- Hidden Contact Form Widget (Required for Scripts) -->
                <b:widget id='ContactForm1' locked='false' title='Contact Form' type='ContactForm' version='2' visible='true'>
                     <b:includable id='main'>
                        <div class='contact-form-widget' style='display:none !important;'>
                           <form name='contact-form'>
                              <input class='contact-form-name' id='ContactForm1_contact-form-name' name='name' type='text'/>
                              <input class='contact-form-email' id='ContactForm1_contact-form-email' name='email' type='text'/>
                              <textarea class='contact-form-email-message' id='ContactForm1_contact-form-email-message' name='email-message'></textarea>
                              <input class='contact-form-button contact-form-button-submit' id='ContactForm1_contact-form-submit' type='button' value='Send'/>
                              <div class='contact-form-error-message' id='ContactForm1_contact-form-error-message'></div>
                              <div class='contact-form-success-message' id='ContactForm1_contact-form-success-message'></div>
                           </form>
                        </div>
                     </b:includable>
                </b:widget>
            </b:section>
        </footer>

        <!-- Post Ads Manager (Hidden on Frontend, Visible in Layout) -->
        <div id='post-ads-manager' style='display:none;'>
            <b:section class='post-ads' id='post-ads' showaddelement='yes'>
                 <b:widget id='HTML4' locked='false' title='Ad (Below Title)' type='HTML' version='2' visible='true'>
                    <b:widget-settings>
                        <b:widget-setting name='content'><![CDATA[<!-- Ad Below Title Content -->]]></b:widget-setting>
                    </b:widget-settings>
                    <b:includable id='main'>
                        <div class='widget-content'>
                            <data:content/>
                        </div>
                    </b:includable>
                 </b:widget>

                 <b:widget id='HTML3' locked='false' title='Ad (After 2nd Para)' type='HTML' version='2' visible='true'>
                    <b:widget-settings>
                       <b:widget-setting name='content'><![CDATA[<!-- Ad After 2nd Paragraph Content -->]]></b:widget-setting>
                    </b:widget-settings>
                    <b:includable id='main'>
                        <div class='widget-content'>
                            <data:content/>
                        </div>
                    </b:includable>
                 </b:widget>

                 <b:widget id='HTML6' locked='false' title='Ad (After 4th Para)' type='HTML' version='2' visible='true'>
                    <b:widget-settings>
                       <b:widget-setting name='content'><![CDATA[<!-- Ad After 4th Paragraph Content -->]]></b:widget-setting>
                    </b:widget-settings>
                    <b:includable id='main'>
                        <div class='widget-content'>
                            <data:content/>
                        </div>
                    </b:includable>
                 </b:widget>

                 <b:widget id='HTML7' locked='false' title='Ad (After 6th Para)' type='HTML' version='2' visible='true'>
                    <b:widget-settings>
                       <b:widget-setting name='content'><![CDATA[<!-- Ad After 6th Paragraph Content -->]]></b:widget-setting>
                    </b:widget-settings>
                    <b:includable id='main'>
                        <div class='widget-content'>
                            <data:content/>
                        </div>
                    </b:includable>
                 </b:widget>

                 <b:widget id='HTML5' locked='false' title='Ad (Below Content)' type='HTML' version='2' visible='true'>
                    <b:widget-settings>
                        <b:widget-setting name='content'><![CDATA[<!-- Ad Below Content Content -->]]></b:widget-setting>
                    </b:widget-settings>
                    <b:includable id='main'>
                        <div class='widget-content'>
                            <data:content/>
                        </div>
                    </b:includable>
                 </b:widget>

                 <b:widget id='HTML12' locked='false' title='Ad (Grid - After 4 Posts)' type='HTML' version='2' visible='true'>
                    <b:widget-settings>
                        <b:widget-setting name='content'><![CDATA[<span style='color: var(--text-secondary); font-weight: bold;'>Sponsored Ad</span>]]></b:widget-setting>
                    </b:widget-settings>
                    <b:includable id='main'>
                        <div class='widget-content'>
                            <data:content/>
                        </div>
                    </b:includable>
                 </b:widget>
            </b:section>
        </div>

    </div>
    <script>
    //<![CDATA[
    // Native Blogger Threaded Comments Reply Logic (Global)
    window.toggleCommentForm = function() {
        var wrappers = document.querySelectorAll('.comment-form-wrapper');
        var btns = document.querySelectorAll('.btn-add-comment');

        wrappers.forEach(function(wrapper) {
            wrapper.style.display = 'block';
            // Scroll to form
            wrapper.scrollIntoView({behavior: "smooth", block: "center"});
        });

        btns.forEach(function(btn) { btn.style.display = 'none'; });
    };

    window.replyToComment = function(commentId) {
        // Ensure form is visible when replying
        if(window.toggleCommentForm) window.toggleCommentForm();

        var iframe = document.getElementById('comment-editor');
        // Find the wrapper (might be multiple if not careful, take the one in use)
        var container = iframe ? iframe.closest('.comment-form-wrapper') : null;

        if (!iframe) {
            console.warn("Comment editor iframe not found");
            return;
        }

        // Reload iframe with parentID to enable threading on the backend
        var src = iframe.src;
        // Ensure src is valid before manipulating
        if(!src) {
             // Fallback: try to find the 'src' link element
             var srcLink = document.getElementById('comment-editor-src');
             if(srcLink) src = srcLink.href;
        }

        if (src) {
            if (src.indexOf('&parentID=') !== -1) {
                 src = src.replace(/&parentID=[0-9]+/, '&parentID=' + commentId);
            } else {
                 src = src + '&parentID=' + commentId;
            }
            iframe.src = src;
        }

        // Scroll to the editor
        iframe.scrollIntoView({behavior: "smooth", block: "center"});
    };

    // Ensure iframe has a source on load if it's empty (common issue)
    window.addEventListener('load', function() {
        var iframe = document.getElementById('comment-editor');
        var srcLink = document.getElementById('comment-editor-src');
        if (iframe && srcLink && !iframe.src) {
            iframe.src = srcLink.href;
        }
    });

    (function() {
        // --- Table Wrapper Logic (Responsive Fix) ---
        // Automatically wraps all tables in .post-body with .table-wrapper
        const postBodyTables = document.querySelectorAll('.post-body table');
        postBodyTables.forEach(table => {
            // Check if already wrapped (to avoid double wrapping)
            if (!table.parentElement.classList.contains('table-wrapper')) {
                const wrapper = document.createElement('div');
                wrapper.className = 'table-wrapper';
                // Insert wrapper before table
                table.parentNode.insertBefore(wrapper, table);
                // Move table inside wrapper
                wrapper.appendChild(table);
            }
        });

        // --- Dark Mode Logic ---
        const toggleBtn = document.getElementById('theme-toggle');
        const html = document.documentElement;
        const iconSun = document.querySelector('.icon-sun');
        const iconMoon = document.querySelector('.icon-moon');

        function setTheme(theme) {
            html.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            if (theme === 'dark') {
                iconMoon.style.display = 'none';
                iconSun.style.display = 'block';
            } else {
                iconMoon.style.display = 'block';
                iconSun.style.display = 'none';
            }
        }

        // Check preference
        const savedTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        setTheme(savedTheme);

        if(toggleBtn) {
            toggleBtn.addEventListener('click', () => {
                const current = html.getAttribute('data-theme');
                setTheme(current === 'dark' ? 'light' : 'dark');
            });
        }

        // --- Search Logic ---
        const searchTrigger = document.getElementById('search-trigger');
        const searchOverlay = document.getElementById('search-overlay');
        const closeSearch = document.getElementById('close-search');

        if(searchTrigger && searchOverlay && closeSearch) {
            searchTrigger.addEventListener('click', () => {
                searchOverlay.classList.add('active');
                // Focus input
                const input = searchOverlay.querySelector('input');
                if(input) setTimeout(() => input.focus(), 100);
            });

            closeSearch.addEventListener('click', () => {
                searchOverlay.classList.remove('active');
            });

            // Close on escape
            document.addEventListener('keydown', (e) => {
                if(e.key === 'Escape') searchOverlay.classList.remove('active');
            });
        }

        // --- Copy & Share Functionality ---
        const targets = document.querySelectorAll('blockquote, .quote-box, .lyrics-box');

        targets.forEach(target => {
            const container = document.createElement('div');
            container.className = 'action-buttons';

            // Copy Button
            const copyBtn = document.createElement('button');
            copyBtn.className = 'action-btn';
            copyBtn.title = 'Copy';
            copyBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>';

            copyBtn.onclick = () => {
                const text = target.innerText;
                navigator.clipboard.writeText(text).then(() => {
                    const originalHTML = copyBtn.innerHTML;
                    copyBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>';
                    setTimeout(() => copyBtn.innerHTML = originalHTML, 2000);
                });
            };

            // Share Button
            const shareBtn = document.createElement('button');
            shareBtn.className = 'action-btn';
            shareBtn.title = 'Share';
            shareBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line></svg>';

            shareBtn.onclick = () => {
                const text = target.innerText;
                if (navigator.share) {
                    navigator.share({
                        title: document.title,
                        text: text,
                        url: window.location.href
                    });
                } else {
                    // Fallback to copy
                    copyBtn.click();
                }
            };

            container.appendChild(copyBtn);
            container.appendChild(shareBtn);
            target.appendChild(container);
        });

        // --- Mobile Menu Injection ---
        const navTools = document.querySelector('.nav-tools');
        const menu = document.querySelector('.main-menu');

        if (navTools && menu) {
            const menuBtn = document.createElement('button');
            menuBtn.className = 'theme-toggle mobile-menu-btn';
            menuBtn.style.marginLeft = '10px';
            menuBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>';

            // Only show on mobile
            const style = document.createElement('style');
            style.innerHTML = `
                .mobile-menu-btn { display: none; }
                @media (max-width: 768px) {
                    .mobile-menu-btn { display: flex; }
                    .main-menu.active { display: block !important; position: absolute; top: 70px; left: 0; right: 0; background: var(--surface-color); padding: 20px; box-shadow: var(--shadow); z-index: 950; }
                    .main-menu.active ul { flex-direction: column; align-items: center; }
                }
            `;
            document.head.appendChild(style);

            menuBtn.onclick = () => {
                menu.classList.toggle('active');
            };

            navTools.appendChild(menuBtn);
        }

        // --- Ad Injection Logic ---
        function injectAd(sourceId, locationType, locationValue) {
            const sourceWidget = document.getElementById(sourceId);
            if (!sourceWidget) return;

            const content = sourceWidget.querySelector('.widget-content');

            // robust check: strip comments and check if anything substantial remains
            const rawHTML = content ? content.innerHTML : '';
            const cleanHTML = rawHTML.replace(/<!--[\s\S]*?-->/g, '').trim();

            if (cleanHTML.length > 5) {
                // Create ad wrapper
                const adWrapper = document.createElement('div');
                adWrapper.className = 'ad-slot-injected';
                adWrapper.style.margin = '20px 0';
                adWrapper.style.textAlign = 'center';
                adWrapper.innerHTML = content.innerHTML;

                if (locationType === 'target') {
                    const targetContainer = document.getElementById(locationValue);
                    if (targetContainer) {
                        targetContainer.appendChild(adWrapper);
                        targetContainer.style.display = 'block'; // Ensure visible
                    }
                } else if (locationType === 'paragraph') {
                    const postBody = document.getElementById('post-body');
                    if (postBody) {
                        // Filter paragraphs to exclude those inside blockquotes or lyrics boxes
                        const allParagraphs = Array.from(postBody.querySelectorAll('p'));
                        const validParagraphs = allParagraphs.filter(p => !p.closest('blockquote') && !p.closest('.lyrics-box'));

                        const index = parseInt(locationValue) - 1; // Convert 1-based count to 0-based index

                        if (validParagraphs.length > index) {
                             // Insert after the Nth valid paragraph
                             const p = validParagraphs[index];
                             p.parentNode.insertBefore(adWrapper, p.nextSibling);
                        } else {
                             // Fallback to BR tags if P tags are missing (common in some editors)
                             // Also filter BR tags to avoid breaking blockquotes
                             const allBreaks = Array.from(postBody.querySelectorAll('br'));
                             const validBreaks = allBreaks.filter(br => !br.closest('blockquote') && !br.closest('.lyrics-box'));

                             if (validBreaks.length > index) {
                                  const br = validBreaks[index];
                                  br.parentNode.insertBefore(adWrapper, br.nextSibling);
                             }
                             // Note: No generic fallback to appendChild to avoid stacking ads at the bottom of short posts
                        }
                    }
                }
            }
        }

        // Run Injection
        // 1. Below Title
        injectAd('HTML4', 'target', 'ad-target-title');

        // 2. Below Content
        injectAd('HTML5', 'target', 'ad-target-bottom');

        // 3. In-Article Ads (Para 2, 4, 6)
        injectAd('HTML3', 'paragraph', 2); // After 2nd paragraph
        injectAd('HTML6', 'paragraph', 4); // After 4th paragraph
        injectAd('HTML7', 'paragraph', 6); // After 6th paragraph

        // 4. Grid Ad (After every 4th post) - Multi-injection
        (function() {
            const gridAdSource = document.getElementById('HTML12');
            if (gridAdSource) {
                const content = gridAdSource.querySelector('.widget-content');
                // Check if valid content exists
                const rawHTML = content ? content.innerHTML : '';
                const cleanHTML = rawHTML.replace(/<!--[\s\S]*?-->/g, '').trim();

                if (cleanHTML.length > 5) {
                    const gridTargets = document.querySelectorAll('.ad-grid-item');
                    gridTargets.forEach(target => {
                        target.innerHTML = content.innerHTML;
                        // Ensure it stays visible if JS was successful
                    });
                } else {
                    // Hide empty grid slots if no ad content
                    const gridTargets = document.querySelectorAll('.ad-grid-item');
                    gridTargets.forEach(target => target.style.display = 'none');
                }
            }
        })();

        // --- Copy Link Functionality ---
        const copyLinkBtn = document.getElementById('copy-link-btn');
        if(copyLinkBtn) {
            copyLinkBtn.addEventListener('click', () => {
                navigator.clipboard.writeText(copyLinkBtn.getAttribute('data-url')).then(() => {
                    const originalText = copyLinkBtn.innerText;
                    copyLinkBtn.innerText = 'Copied!';
                    setTimeout(() => copyLinkBtn.innerText = originalText, 2000);
                });
            });
        }

        // --- Related Posts Logic ---
        const relatedData = document.getElementById('related-post-data');
        const relatedContainer = document.getElementById('related-grid-content');

        if(relatedData && relatedContainer) {
            const label = relatedData.getAttribute('data-label');
            if(label) {
                fetch('/feeds/posts/summary/-/' + encodeURIComponent(label) + '?alt=json&max-results=4')
                .then(res => res.json())
                .then(data => {
                    const entries = data.feed.entry;
                    if(entries && entries.length > 0) {
                        let html = '';
                        let count = 0;
                        entries.forEach(entry => {
                            if(count >= 3) return; // Limit to 3 items

                            const title = entry.title.$t;
                            let href = '#';
                            // Find alternate link
                            for(let i=0; i<entry.link.length; i++) {
                                if(entry.link[i].rel === 'alternate') {
                                    href = entry.link[i].href;
                                    break;
                                }
                            }

                            // Get image
                            let img = 'https://via.placeholder.com/300x200?text=No+Image';
                            if(entry.media$thumbnail) {
                                // Resize thumbnail for better quality
                                img = entry.media$thumbnail.url.replace('/s72-c/', '/w300-h200-p-k-no-nu/');
                            }

                            // Basic check to avoid showing current post
                            if(href !== window.location.href.split('?')[0]) {
                                html += `
                                    <div class="related-item">
                                        <a href="${href}">
                                            <div class="related-thumb">
                                                <img src="${img}" loading="lazy" alt="${title}">
                                            </div>
                                            <span class="related-title">${title}</span>
                                        </a>
                                    </div>
                                `;
                                count++;
                            }
                        });

                        if(html === '') {
                             document.getElementById('related-posts').style.display = 'none';
                        } else {
                             relatedContainer.innerHTML = html;
                        }
                    } else {
                        document.getElementById('related-posts').style.display = 'none';
                    }
                })
                .catch(err => {
                    console.error('Error fetching related posts', err);
                    document.getElementById('related-posts').style.display = 'none';
                });
            } else {
                document.getElementById('related-posts').style.display = 'none';
            }
        }

        // --- News Ticker Logic ---
        const tickerContent = document.getElementById('ticker-content');
        if (tickerContent) {
            fetch('/feeds/posts/summary?alt=json&max-results=8')
            .then(res => res.json())
            .then(data => {
                const entries = data.feed.entry;
                if (entries && entries.length > 0) {
                    let itemsHtml = '';
                    const createItem = (entry) => {
                        const title = entry.title.$t;
                        let href = '#';
                        for(let i=0; i<entry.link.length; i++) {
                            if(entry.link[i].rel === 'alternate') {
                                href = entry.link[i].href;
                                break;
                            }
                        }
                        return `<div class="ticker-item"><a href="${href}">${title}</a></div>`;
                    };

                    // Generate items once
                    entries.forEach(entry => { itemsHtml += createItem(entry); });

                    // Double them for seamless loop
                    const finalHtml = `<div class="ticker-wrap"><div class="ticker-move">${itemsHtml}${itemsHtml}</div></div>`;
                    tickerContent.innerHTML = finalHtml;
                } else {
                    tickerContent.innerHTML = '<span>No recent posts found.</span>';
                }
            })
            .catch(err => {
                console.error('Error loading ticker', err);
                tickerContent.innerHTML = '<span>Error loading updates.</span>';
            });
        }

    })();
    //]]>
    </script>
</body>
</html>
